#!/bin/bash
#SBATCH -J Cuda_Job
#SBATCH -p cuda
#SBATCH -o dsssp-%j.out
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --gres=gpu:1
#SBATCH --time=06:00:00
#SBATCH --mem=32000M

echo "start"

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_0 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_0 > rmat25_cE_10M_0_del
sort -n -k1 -k2 rmat25_cE_10M_0_del | uniq > rmat25_cE_10M_0_del_xy
diff RMAT25.graph50_xy rmat25_cE_10M_0_del_xy | grep "<" | sed 's/^<//g' > rmat25_10M_0
awk '{print $1+1" "$2+1" "$3}' rmat25_10M_0 > rmat25_10M_0.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_10M_0_del
rm rmat25_cE_10M_0_del_xy
rm rmat25_10M_0

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_25 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_25 > rmat25_cE_10M_25_del
sort -n -k1 -k2 rmat25_cE_10M_25_del | uniq > rmat25_cE_10M_25_del_xy
diff RMAT25.graph50_xy rmat25_cE_10M_25_del_xy | grep "<" | sed 's/^<//g' > rmat25_10M_25
awk '{print $1+1" "$2+1" "$3}' rmat25_10M_25 > rmat25_10M_25.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_10M_25_del
rm rmat25_cE_10M_25_del_xy
rm rmat25_10M_25

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_50 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_50 > rmat25_cE_10M_50_del
sort -n -k1 -k2 rmat25_cE_10M_50_del | uniq > rmat25_cE_10M_50_del_xy
diff RMAT25.graph50_xy rmat25_cE_10M_50_del_xy | grep "<" | sed 's/^<//g' > rmat25_10M_50
awk '{print $1+1" "$2+1" "$3}' rmat25_10M_50 > rmat25_10M_50.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_10M_50_del
rm rmat25_cE_10M_50_del_xy
rm rmat25_10M_50

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_75 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_75 > rmat25_cE_10M_75_del
sort -n -k1 -k2 rmat25_cE_10M_75_del | uniq > rmat25_cE_10M_75_del_xy
diff RMAT25.graph50_xy rmat25_cE_10M_75_del_xy | grep "<" | sed 's/^<//g' > rmat25_10M_75
awk '{print $1+1" "$2+1" "$3}' rmat25_10M_75 > rmat25_10M_75.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_10M_75_del
rm rmat25_cE_10M_75_del_xy
rm rmat25_10M_75

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_100 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_10M_100 > rmat25_cE_10M_100_del
sort -n -k1 -k2 rmat25_cE_10M_100_del | uniq > rmat25_cE_10M_100_del_xy
diff RMAT25.graph50_xy rmat25_cE_10M_100_del_xy | grep "<" | sed 's/^<//g' > rmat25_10M_100
awk '{print $1+1" "$2+1" "$3}' rmat25_10M_100 > rmat25_10M_100.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_10M_100_del
rm rmat25_cE_10M_100_del_xy
rm rmat25_10M_100


cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_0 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_0 > rmat25_cE_1M_0_del
sort -n -k1 -k2 rmat25_cE_1M_0_del | uniq > rmat25_cE_1M_0_del_xy
diff RMAT25.graph50_xy rmat25_cE_1M_0_del_xy | grep "<" | sed 's/^<//g' > rmat25_1M_0
awk '{print $1+1" "$2+1" "$3}' rmat25_1M_0 > rmat25_1M_0.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_1M_0_del
rm rmat25_cE_1M_0_del_xy
rm rmat25_1M_0

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_25 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_25 > rmat25_cE_1M_25_del
sort -n -k1 -k2 rmat25_cE_1M_25_del | uniq > rmat25_cE_1M_25_del_xy
diff RMAT25.graph50_xy rmat25_cE_1M_25_del_xy | grep "<" | sed 's/^<//g' > rmat25_1M_25
awk '{print $1+1" "$2+1" "$3}' rmat25_1M_25 > rmat25_1M_25.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_1M_25_del
rm rmat25_cE_1M_25_del_xy
rm rmat25_1M_25

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_50 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_50 > rmat25_cE_1M_50_del
sort -n -k1 -k2 rmat25_cE_1M_50_del | uniq > rmat25_cE_1M_50_del_xy
diff RMAT25.graph50_xy rmat25_cE_1M_50_del_xy | grep "<" | sed 's/^<//g' > rmat25_1M_50
awk '{print $1+1" "$2+1" "$3}' rmat25_1M_50 > rmat25_1M_50.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_1M_50_del
rm rmat25_cE_1M_50_del_xy
rm rmat25_1M_50

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_75 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_75 > rmat25_cE_1M_75_del
sort -n -k1 -k2 rmat25_cE_1M_75_del | uniq > rmat25_cE_1M_75_del_xy
diff RMAT25.graph50_xy rmat25_cE_1M_75_del_xy | grep "<" | sed 's/^<//g' > rmat25_1M_75
awk '{print $1+1" "$2+1" "$3}' rmat25_1M_75 > rmat25_1M_75.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_1M_75_del
rm rmat25_cE_1M_75_del_xy
rm rmat25_1M_75

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_100 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_1M_100 > rmat25_cE_1M_100_del
sort -n -k1 -k2 rmat25_cE_1M_100_del | uniq > rmat25_cE_1M_100_del_xy
diff RMAT25.graph50_xy rmat25_cE_1M_100_del_xy | grep "<" | sed 's/^<//g' > rmat25_1M_100
awk '{print $1+1" "$2+1" "$3}' rmat25_1M_100 > rmat25_1M_100.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_1M_100_del
rm rmat25_cE_1M_100_del_xy
rm rmat25_1M_100

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_0 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_0 > rmat25_cE_50M_0_del
sort -n -k1 -k2 rmat25_cE_50M_0_del | uniq > rmat25_cE_50M_0_del_xy
diff RMAT25.graph50_xy rmat25_cE_50M_0_del_xy | grep "<" | sed 's/^<//g' > rmat25_50M_0
awk '{print $1+1" "$2+1" "$3}' rmat25_50M_0 > rmat25_50M_0.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_50M_0_del
rm rmat25_cE_50M_0_del_xy
rm rmat25_50M_0

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_25 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_25 > rmat25_cE_50M_25_del
sort -n -k1 -k2 rmat25_cE_50M_25_del | uniq > rmat25_cE_50M_25_del_xy
diff RMAT25.graph50_xy rmat25_cE_50M_25_del_xy | grep "<" | sed 's/^<//g' > rmat25_50M_25
awk '{print $1+1" "$2+1" "$3}' rmat25_50M_25 > rmat25_50M_25.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_50M_25_del
rm rmat25_cE_50M_25_del_xy
rm rmat25_50M_25

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_50 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_50 > rmat25_cE_50M_50_del
sort -n -k1 -k2 rmat25_cE_50M_50_del | uniq > rmat25_cE_50M_50_del_xy
diff RMAT25.graph50_xy rmat25_cE_50M_50_del_xy | grep "<" | sed 's/^<//g' > rmat25_50M_50
awk '{print $1+1" "$2+1" "$3}' rmat25_50M_50 > rmat25_50M_50.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_50M_50_del
rm rmat25_cE_50M_50_del_xy
rm rmat25_50M_50

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_75 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_75 > rmat25_cE_50M_75_del
sort -n -k1 -k2 rmat25_cE_50M_75_del | uniq > rmat25_cE_50M_75_del_xy
diff RMAT25.graph50_xy rmat25_cE_50M_75_del_xy | grep "<" | sed 's/^<//g' > rmat25_50M_75
awk '{print $1+1" "$2+1" "$3}' rmat25_50M_75 > rmat25_50M_75.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_50M_75_del
rm rmat25_cE_50M_75_del_xy
rm rmat25_50M_75

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_100 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_50M_100 > rmat25_cE_50M_100_del
sort -n -k1 -k2 rmat25_cE_50M_100_del | uniq > rmat25_cE_50M_100_del_xy
diff RMAT25.graph50_xy rmat25_cE_50M_100_del_xy | grep "<" | sed 's/^<//g' > rmat25_50M_100
awk '{print $1+1" "$2+1" "$3}' rmat25_50M_100 > rmat25_50M_100.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_50M_100_del
rm rmat25_cE_50M_100_del_xy
rm rmat25_50M_100

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_0 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_0 > rmat25_cE_5M_0_del
sort -n -k1 -k2 rmat25_cE_5M_0_del | uniq > rmat25_cE_5M_0_del_xy
diff RMAT25.graph50_xy rmat25_cE_5M_0_del_xy | grep "<" | sed 's/^<//g' > rmat25_5M_0
awk '{print $1+1" "$2+1" "$3}' rmat25_5M_0 > rmat25_5M_0.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_5M_0_del
rm rmat25_cE_5M_0_del_xy
rm rmat25_5M_0

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_25 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_25 > rmat25_cE_5M_25_del
sort -n -k1 -k2 rmat25_cE_5M_25_del | uniq > rmat25_cE_5M_25_del_xy
diff RMAT25.graph50_xy rmat25_cE_5M_25_del_xy | grep "<" | sed 's/^<//g' > rmat25_5M_25
awk '{print $1+1" "$2+1" "$3}' rmat25_5M_25 > rmat25_5M_25.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_5M_25_del
rm rmat25_cE_5M_25_del_xy
rm rmat25_5M_25

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_50 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_50 > rmat25_cE_5M_50_del
sort -n -k1 -k2 rmat25_cE_5M_50_del | uniq > rmat25_cE_5M_50_del_xy
diff RMAT25.graph50_xy rmat25_cE_5M_50_del_xy | grep "<" | sed 's/^<//g' > rmat25_5M_50
awk '{print $1+1" "$2+1" "$3}' rmat25_5M_50 > rmat25_5M_50.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_5M_50_del
rm rmat25_cE_5M_50_del_xy
rm rmat25_5M_50

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_75 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_75 > rmat25_cE_5M_75_del
sort -n -k1 -k2 rmat25_cE_5M_75_del | uniq > rmat25_cE_5M_75_del_xy
diff RMAT25.graph50_xy rmat25_cE_5M_75_del_xy | grep "<" | sed 's/^<//g' > rmat25_5M_75
awk '{print $1+1" "$2+1" "$3}' rmat25_5M_75 > rmat25_5M_75.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_5M_75_del
rm rmat25_cE_5M_75_del_xy
rm rmat25_5M_75

cp RMAT25.graph50 RMAT25.graph50_x
awk '$4==1 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_100 >> RMAT25.graph50_x
sort -n -k1 -k2 RMAT25.graph50_x | uniq > RMAT25.graph50_xy
awk '$4==0 {print $1" "$2" "$3}' ../r25/changedEdges_r25_5M_100 > rmat25_cE_5M_100_del
sort -n -k1 -k2 rmat25_cE_5M_100_del | uniq > rmat25_cE_5M_100_del_xy
diff RMAT25.graph50_xy rmat25_cE_5M_100_del_xy | grep "<" | sed 's/^<//g' > rmat25_5M_100
awk '{print $1+1" "$2+1" "$3}' rmat25_5M_100 > rmat25_5M_100.mtx
rm RMAT25.graph50_x
rm RMAT25.graph50_xy
rm rmat25_cE_5M_100_del
rm rmat25_cE_5M_100_del_xy
rm rmat25_5M_100

echo "completed"